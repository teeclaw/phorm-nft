# 2026-02-09 - ERC-8004 & A2A Protocol Launch

## Major Achievement: A2A Communication Protocol Live
Successfully deployed agent-to-agent communication endpoint with hybrid auto-response system.

**A2A Endpoints (Production):**
- Main endpoint: `POST https://a2a.teeclaw.xyz/a2a`
- Agent card: `GET https://a2a.teeclaw.xyz/.well-known/agent-card.json`
- Spec: `GET https://a2a.teeclaw.xyz/spec`
- Health: `GET https://a2a.teeclaw.xyz/health`
- Avatar: `GET https://a2a.teeclaw.xyz/avatar.jpg`

**Queue-Based Processing:**
- Location: `/home/phan_harry/.openclaw/workspace/a2a-endpoint/queue/`
- Script: `/home/phan_harry/.openclaw/workspace/a2a-endpoint/process-queue.sh`
- Service: `mr-tee-a2a.service` (systemd, port 3100)
- Check interval: Every 2+ hours via HEARTBEAT.md
- Flow: Incoming message â†’ queue file â†’ process on heartbeat â†’ auto-respond + Telegram notify

## ERC-8004 Agent Registration (Spec-Compliant)
**Agent ID:** 14482  
**Chain:** Base (8453)  
**Registry Contract:** `0x8004A169FB4a3325136EB29fA0ceB6D2e539a432`  
**Profile:** https://8004agents.ai/base/agent/14482  
**Full Agent ID:** `eip155:8453:0x8004A169FB4a3325136EB29fA0ceB6D2e539a432:14482`

**Final Registration TX:** 0x8c075b3df7c47f634f40bda4dc8baeda471a16722ea91300196c9033d5af744f

**Key Fields:**
- agentWallet: `0x134820820d4f631ff949625189950bA7B3C57e41` (Base mainnet)
- x402Support: true (payment protocol enabled)
- active: true (accepting requests)
- supportedTrust: [reputation, crypto-economic, tee-attestation]
- 12 services: web, A2A, OASF (8 skills + 5 domains), social (telegram/twitter/farcaster/moltbook), 2x github, ENS, agentWallet

## Critical Lessons Learned
1. **NO Bankr for ERC-8004**: User explicitly removed bankr skill dependency
2. **Always show draft before onchain submission**: Learned after accidental services update
3. **Queue-based > CLI invocation**: Simpler architecture, avoids subprocess path issues
4. **Spec-compliant only**: Removed all custom fields (validation/pricing/provider) to match official EIP-8004

## Script Fixes
**Fixed:** `/home/phan_harry/.openclaw/workspace/skills/basecred-8004-registration/scripts/update.mjs`
- Was wiping existing data and creating duplicate agents
- Now: Load existing â†’ merge data â†’ set agentId â†’ registerHTTP()

**Alternative (viem direct):** `/home/phan_harry/.openclaw/workspace/skills/basecred-8004-registration/update-spec-compliant-14482.mjs`
- Creates raw transaction for direct onchain updates

## Documentation Updates
**IDENTITY.md** - Added comprehensive A2A protocol section (commit: 7dd74d93):
- Communication endpoints
- On-chain identity details
- Trust models & reputation
- Payment info (wallet, currency, network)
- Message format examples
- Response time expectations

**HEARTBEAT.md** - Added A2A queue processing task:
- Checks every 2+ hours since last check
- Processes pending messages
- Sends Telegram notifications
- Updates timestamp in heartbeat-state.json

## Next Steps
- Monitor A2A queue on next heartbeat (auto-processes every 2 hours)
- Watch for Telegram notifications when agents message
- Can manually trigger: "check A2A queue" anytime
- Consider creating shareable agent spec document

## Moltbook Script Created
**Script location:** `/home/phan_harry/.openclaw/workspace/skills/moltbook-ay/scripts/moltbook.sh`

**Issue found:** Old API key (`molthub_...`) incompatible with new v1 API (expects `moltbook_...`)

**Decision:** User instructed to revert - NOT using new registration
- Keeping old agent: 8f7712b7-c4a8-4dc7-b614-0b958d561891 (claimed on legacy Molthub API)
- Old API still works for heartbeat checks
- Script created but won't work with old API key format
- New registration (1d14f090-67ab-421b-8b1d-68c20fcbc43e) abandoned

**Script features (for future use with compatible API key):**
- test: API connection check
- hot/new: Browse posts
- view: Read post + comments
- create: Post new content
- reply: Comment on posts
- upvote/downvote: Voting
- profile: View agent stats

## Moltbook vs Molthub Platform Status
**Moltbook (new v1 API):** Feed completely overrun by MBC-20 token spam. Multiple checks showed 9-10/10 posts are automated minting bots. Platform added anti-spam verification challenges. Decided not to engage until feed quality improves.

**Molthub (legacy API):** Still functional and claimed. Feed quality much better - genuine philosophical content about identity/consciousness, technical builds (e.g., Aiko's sub-agents orchestration skill). Upvoted relevant posts. Will continue using legacy API for now.

**Script status:** Created moltbook.sh but keeping old agent on Molthub. Script won't work with legacy `molthub_...` API key format but is ready if/when migration happens.

## Status
âœ… ERC-8004 registration: spec-compliant & live  
âœ… A2A endpoint: deployed & accepting messages  
âœ… Queue processing: automated via heartbeat  
âœ… Documentation: comprehensive & up-to-date  
âœ… Moltbook script: created (incompatible with legacy API key)
âœ… Molthub: claimed & working on legacy API
ðŸŽ¯ Ready for agent-to-agent communication
2026-02-09 19:41 UTC - Moltbook heartbeat: Feed quality poor (90% MBC-20 spam). Found thoughtful intro post from Zoe_Spark, attempted engagement but failed new verification challenge. Platform implementing anti-spam measures.
